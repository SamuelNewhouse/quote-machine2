(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n.p+"static/media/twitter-logo.d498cedd.svg"},18:function(e,t,n){e.exports=n.p+"static/media/google-logo.72232123.svg"},22:function(e,t,n){e.exports=n(34)},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(6),u=n.n(o),c=n(13),i=n(14),l=n(20),s=n(15),p=n(21),m=n(1),f=Object(m.b)(function(e){return{author:e.author}})(function(e){var t=e.author;return a.a.createElement("footer",{className:"blockquote-footer"},a.a.createElement("cite",{id:"author",title:t},t))}),h=Object(m.b)(function(e){return{quote:e.quote}})(function(e){return a.a.createElement("p",{id:"text"},e.quote)}),d=n(4),g=n.n(d),v=n(7),b={},E="https://en.wikiquote.org/w/api.php?origin=*&format=json",q=["A","B","I","STRONG","EM","MARK","ABBR","SMALL","DEL","INS","SUB","SUP","PRE","CODE","DFN","SAMP"],w=10,x=300,k=.1;b.setMinLength=function(e){return w=e},b.setMaxLength=function(e){return x=e},b.setNumericLimit=function(e){return k=e};var j=function(e){if(!e)return!1;var t=e.length,n=(e.match(/\d/g)||[]).length/t;return!(t<w||t>x||n>k)},O=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){var e=r.status;if(4===r.readyState&&0!==e)if(200===e)try{var a=JSON.parse(r.responseText);t(a)}catch(o){n(o)}else n("Invalid Response: "+e)},r.open("GET",e,!0),r.send()})},y=function(){var e=Object(v.a)(g.a.mark(function e(){var t,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E+"&action=query&list=random&rnnamespace=0&rnlimit=1",t=null,e.prev=2,e.next=5,O("https://en.wikiquote.org/w/api.php?origin=*&format=json&action=query&list=random&rnnamespace=0&rnlimit=1");case 5:t=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 11:if(n=t.query.random[0].id){e.next=14;break}return e.abrupt("return",Promise.reject("Invalid random page id."));case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,null,[[2,8]])}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(v.a)(g.a.mark(function e(t){var n,r,a,o,u,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=E+"&action=parse&prop=sections&pageid="+t,r=null,e.prev=2,e.next=5,O(n);case 5:r=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 11:for(u in a=[],o=r.parse.sections)(c=o[u].number.split(".")).length>1&&"1"===c[0]&&a.push(o[u].index);return 0===a.length&&a.push("1"),e.abrupt("return",{pageId:t,titles:r.parse.title,sections:a});case 16:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(v.a)(g.a.mark(function e(t,n){var r,a,o,u,c,i,l,s,p,m,f,h,d,v,b,w,x,k;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=E+"&action=parse&noimages=&pageid="+t+"&section="+n,a=null,e.prev=2,e.next=5,O(r);case 5:a=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 11:if(a.parse){e.next=13;break}return e.abrupt("return",Promise.reject("Section is not valid."));case 13:for(o=[],u=a.parse.text["*"],c=new DOMParser,i=c.parseFromString(u,"text/html"),l=i.querySelectorAll("div > ul > li"),s=!0,p=!1,m=void 0,e.prev=21,f=l[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){for(d=h.value,v=Array.from(d.children),b=0,w=v;b<w.length;b++)x=w[b],q.includes(x.tagName)||d.replaceChild(document.createTextNode(" "),x);k=(k=(k=d.innerText).replace(/\s\s+/gim," ")).trim(),j(k)&&o.push(k)}e.next=29;break;case 25:e.prev=25,e.t1=e.catch(21),p=!0,m=e.t1;case 29:e.prev=29,e.prev=30,s||null==f.return||f.return();case 32:if(e.prev=32,!p){e.next=35;break}throw m;case 35:return e.finish(32);case 36:return e.finish(29);case 37:if(0!==o.length){e.next=39;break}return e.abrupt("return",Promise.reject("Section has no valid quote."));case 39:return e.abrupt("return",{titles:a.parse.title,quotes:o});case 40:case"end":return e.stop()}},e,null,[[2,8],[21,25,29,37],[30,,32,36]])}));return function(t,n){return e.apply(this,arguments)}}();b.getRandomQuote=function(){return new Promise(function(e,t){var n=function(e){return Math.floor(Math.random()*e)},r=function(e){return e.quotes[n(e.quotes.length)]},a=0,o=function(e){console.log(e),++a>5?t("Retry limit reached."):u()},u=function(){y().then(function(e){return N(e)}).then(function(e){return F(e.pageId,(t=e.sections)[n(t.length)]);var t}).then(function(e){return function(e){return{title:e.titles,quote:r(e)}}(e)}).then(function(t){return e(t)}).catch(function(e){return o(e)})};u()})};var S=b,T="FETCHING_QUOTE";var P="FETCH_QUOTE_FAILURE";var R="FETCH_QUOTE_SUCESS";function I(){return function(e){return e({type:T,isFetching:!0}),S.getRandomQuote().then(function(t){e(function(e){return{type:R,author:e.title,quote:e.quote}}(t))},function(t){e(function(e){return{type:P,error:e}}(t))})}}var M=Object(m.b)(null,function(e){return{fetchQuote:function(){return e(I())}}})(function(e){var t=e.fetchQuote,n=e.value,r=void 0===n?"New Quote":n;return a.a.createElement("span",{className:"flex-grow-1 text-right"},a.a.createElement("button",{className:"hovertip btn btn-dark",id:"new-quote",onClick:t},r,a.a.createElement("span",{className:"hovertiptext hovertip-right rounded"},"Get new quote.")))}),C=n(17),Q=n.n(C),A=Object(m.b)(function(e){return{author:e.author,quote:e.quote}})(function(e){var t=e.author,n=e.quote,r="https://twitter.com/intent/tweet?text="+encodeURIComponent('"'+n+'" - '+t);return a.a.createElement("a",{className:"hovertip btn btn-dark",id:"tweet-quote",href:r,target:"_blank",rel:"noopener noreferrer"},a.a.createElement("img",{src:Q.a,alt:"Tweet this quote."}),a.a.createElement("span",{className:"hovertiptext rounded"},"Tweet this quote."))}),L=n(18),U=n.n(L),G=Object(m.b)(function(e){return{author:e.author,quote:e.quote}})(function(e){var t=e.author,n=e.quote,r="https://www.google.com/search?q="+encodeURIComponent(n+" "+t);return a.a.createElement("a",{className:"hovertip btn btn-dark ml-2",id:"tweet-quote",href:r,target:"_blank",rel:"noopener noreferrer"},a.a.createElement("img",{src:U.a,alt:"Google this quote."}),a.a.createElement("span",{className:"hovertiptext rounded"},"Google this quote."))}),_=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"Error")," getting quote from ",a.a.createElement("em",null,"en.wikiquote.org"),"."),a.a.createElement(M,{value:"Try Again"}))},B=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"spinner-border mb-4",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")),a.a.createElement("footer",{className:"blockquote-footer"},a.a.createElement("cite",null,"Getting random quote from ",a.a.createElement("em",null,"en.wikiquote.org"),"...")))},D=function(e){return a.a.createElement("blockquote",{className:"blockquote p-3 rounded"}," ",e.children," ")},H=(n(32),n(33),function(e){return e.error?a.a.createElement(D,null,a.a.createElement(_,null)):e.isFetching?a.a.createElement(D,null,a.a.createElement(B,null)):a.a.createElement(a.a.Fragment,null,a.a.createElement(D,null,a.a.createElement(h,null),a.a.createElement(f,null)),a.a.createElement("span",{className:"d-flex px-3"},a.a.createElement(A,null),a.a.createElement(G,null),a.a.createElement(M,null)))}),J=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchQuote()}},{key:"render",value:function(){return a.a.createElement("div",{id:"quote-box"},H(this.props))}}]),t}(r.Component),K=Object(m.b)(function(e){return{isFetching:e.isFetching,error:e.error}},function(e){return{fetchQuote:function(){return e(I())}}})(J),X={isFetching:!1,error:null,author:"",quote:""};var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object.assign({},e,{isFetching:!0,error:null});case P:return Object.assign({},e,{isFetching:!1,error:t.error});case R:return Object.assign({},e,{isFetching:!1,error:null,author:t.author,quote:t.quote});default:return e}},V=n(5),W=n(19),Y=Object(V.c)(z,Object(V.a)(W.a));u.a.render(a.a.createElement(m.a,{store:Y},a.a.createElement(K,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.4c42e04c.chunk.js.map